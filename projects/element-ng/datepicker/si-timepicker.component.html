<div
  class="d-flex flex-row flex-wrap"
  cdkMonitorSubtreeFocus
  (cdkFocusChange)="focusChange($event)"
>
  <label class="min-width">
    @if (!hideLabels()) {
      <span class="form-label">{{ (hoursLabel() | translate) || '&nbsp;' }}</span>
    }
    <input
      #inputPart
      type="number"
      inputmode="numeric"
      class="form-control hide-feedback-icon"
      name="hours"
      min="-1"
      autocomplete="off"
      step="1"
      [max]="use12HourClock() ? 13 : 24"
      [attr.aria-label]="hoursAriaLabel() | translate"
      [attr.aria-describedby]="errormessageId"
      [class.is-invalid]="invalidHours"
      [disabled]="disabled()"
      [readonly]="readonly()"
      [placeholder]="hoursPlaceholder()"
      [value]="hours"
      (change)="updateHours(toHtmlInputElement($event.target).value)"
      (blur)="updateHours(toHtmlInputElement($event.target).value)"
      (click)="toHtmlInputElement($event.target).select()"
      (keydown.arrowLeft)="$event.preventDefault()"
      (keydown.enter)="focusNext($event)"
      (input)="handleInput($event, use12HourClock() ? 12 : 24, 2)"
    />
  </label>

  @if (showMinutes()) {
    <ng-container *ngTemplateOutlet="separator" />
    <label class="min-width">
      @if (!hideLabels()) {
        <span class="form-label">{{ (minutesLabel() | translate) || '&nbsp;' }}</span>
      }
      <input
        #inputPart
        type="number"
        inputmode="numeric"
        class="form-control hide-feedback-icon"
        name="minutes"
        max="60"
        min="-1"
        autocomplete="off"
        step="1"
        [attr.aria-label]="minutesAriaLabel() | translate"
        [attr.aria-describedby]="errormessageId"
        [class.is-invalid]="invalidMinutes"
        [disabled]="disabled()"
        [readonly]="readonly()"
        [placeholder]="minutesPlaceholder()"
        [value]="minutes"
        (change)="updateMinutes(toHtmlInputElement($event.target).value)"
        (blur)="updateMinutes(toHtmlInputElement($event.target).value)"
        (click)="toHtmlInputElement($event.target).select()"
        (keydown.arrowLeft)="$event.preventDefault()"
        (keydown.enter)="focusNext($event)"
        (input)="handleInput($event, 59, 2)"
      />
    </label>
  }

  @if (showSeconds()) {
    <ng-container *ngTemplateOutlet="separator" />
    <label class="min-width">
      @if (!hideLabels()) {
        <span class="form-label">{{ (secondsLabel() | translate) || '&nbsp;' }}</span>
      }
      <input
        #inputPart
        type="number"
        inputmode="numeric"
        class="form-control hide-feedback-icon"
        name="seconds"
        max="60"
        min="-1"
        autocomplete="off"
        step="1"
        [attr.aria-label]="secondsAriaLabel() | translate"
        [attr.aria-describedby]="errormessageId"
        [class.is-invalid]="invalidSeconds"
        [disabled]="disabled()"
        [readonly]="readonly()"
        [placeholder]="secondsPlaceholder()"
        [value]="seconds"
        (change)="updateSeconds(toHtmlInputElement($event.target).value)"
        (blur)="updateSeconds(toHtmlInputElement($event.target).value)"
        (click)="toHtmlInputElement($event.target).select()"
        (keydown.arrowLeft)="$event.preventDefault()"
        (keydown.enter)="focusNext($event)"
        (input)="handleInput($event, 59, 2)"
      />
    </label>
  }

  @if (showMilliseconds()) {
    <ng-container *ngTemplateOutlet="separator; context: { separator: '.' }" />
    <label class="min-width">
      @if (!hideLabels()) {
        <span class="form-label">{{ (millisecondsLabel() | translate) || '&nbsp;' }}</span>
      }
      <input
        #inputPart
        type="number"
        inputmode="numeric"
        class="form-control hide-feedback-icon"
        name="milliseconds"
        max="1000"
        min="-1"
        autocomplete="off"
        step="1"
        [attr.aria-label]="millisecondsAriaLabel() | translate"
        [attr.aria-describedby]="errormessageId"
        [class.is-invalid]="invalidMilliseconds"
        [disabled]="disabled()"
        [readonly]="readonly()"
        [placeholder]="millisecondsPlaceholder()"
        [value]="milliseconds"
        (change)="updateMilliseconds(toHtmlInputElement($event.target).value)"
        (blur)="updateMilliseconds(toHtmlInputElement($event.target).value)"
        (click)="toHtmlInputElement($event.target).select()"
        (keydown.arrowLeft)="$event.preventDefault()"
        (keydown.enter)="focusNext($event)"
        (input)="handleInput($event, 999, 2)"
      />
    </label>
  }

  @if (use12HourClock()) {
    <label class="ms-2">
      @if (!hideLabels()) {
        <span class="form-label">{{ (meridiansLabel() | translate) || '&nbsp;' }}</span>
      }
      <select
        #inputPart
        class="form-control"
        [attr.aria-label]="meridiansAriaLabel() | translate"
        [attr.aria-describedby]="errormessageId"
        [class.readonly]="readonly()"
        [disabled]="disabled()"
        (change)="toggleMeridian()"
        (keydown.enter)="focusNext($event)"
      >
        <option value="am" [selected]="meridian() === 'am'">{{ periods()[0] }}</option>
        <option value="pm" [selected]="meridian() === 'pm'">{{ periods()[1] }}</option>
      </select>
    </label>
  }
</div>

<ng-template #separator let-separator="separator">
  <div class="align-self-end pb-3 px-1" aria-hidden="true">{{ separator ? separator : ':' }}</div>
</ng-template>
